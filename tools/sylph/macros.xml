<macros>
    <token name="@TOOL_VERSION@">0.6.1</token>
    <token name="@VERSION_SUFFIX@">0</token>
    <token name="@LICENSE@">MIT</token>
    <xml name="requirements">
        <requirements>
            <requirement type="package" version="@TOOL_VERSION@">sylph</requirement>
            <requirement type="package" version="3.11.9">python</requirement>
            <requirement type="package" version="2.2.3">pandas</requirement>
        </requirements>
    </xml>
    <xml name="description">
        <description>Metagenomic assignments</description>
    </xml>
    <xml name="citation">
        <citations>
            <citation type="doi">10.1101/2023.11.20.567879</citation>
        </citations>
    </xml>
    <xml name="creator">
        <creator>
            <organization name="University of Toronto" url="https://github.com/bluenote-1577/sylph"/>
        </creator>
    </xml>
    <xml name="xrefs">
        <xrefs>
            <xref type="bio.tools">sylph</xref>
        </xrefs>
    </xml>
    <xml name="input_database">
        <conditional name="database_select">
            <param name="select" type="select" label="Choose the source for databases and metadata">
                <option value="cached">Cached data</option>
                <option value="history">History</option>
            </param>
            <when value="cached">
                <param label="Select a sylph database" name="sylph_database" type="select">
                    <options from_data_table="sylph_databases">
                        <validator message="No Sylph databases are available" type="no_options" />
                    </options>
                </param>
            </when>
            <when value="history">
                <param label="Select a history dataset" name="sylph_database" type="data" format="binary" />
                <param label="Metadata file for metaphlan and krona outputs" name="metadata" type="data" format="tabular.gz" optional="true" help="The metata file MUST be directly associated with the input database. For more information, view the help text of the tool."/>
            </when>
        </conditional>
    </xml>
    <xml name="output_format">
        <param label="Additional output formats" name="outputs" type="select" display="checkboxes" multiple="true" help="In addition to Sylph's tabular output, you may ouput a file converted to these formats">
            <option value="metaphlan">Sylph's MetaPhlAn-like output</option>
            <option value="krona">Krona compatible</option>
        </param>
    </xml>
</macros>